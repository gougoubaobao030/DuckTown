# 今天做了的事


### 2025年6月22日

**学了啥**
  - 状态驱动
    - 根据角色现在状态更新每一帧

---

### 2025年6月23日

**做了啥**
- 将交互系统内部文件位置调整
  - 使其位置用途更加清晰
- 用文档厘清架构
  
**学了啥**
- 双轨制事件
  - 策划在面板调试音乐
  - 程序媛后面整活逻辑 

- 挂载mono的其他功能模块要mono拖入
- 或者用非mono系统抽象
    - 手动调用update


### 2025年6月24日
**做了啥**
- 增加一个isInInteractState的bool值
- 给statecache记录法变量重新命名，使其更加清晰
- 抽出UpdateInteractUI方法
- 重新调整UI方法
    - 先总体判断是否应该显示UI
    - 对且仅对UI的上一帧状态做cache判断
- 成功结合交互系统和交互状态修复npc对话提示UI依旧显示问题
- 并且实现关闭对话框UI依旧会出现，不用重新刷新靠近
- 事件 ➜ 控制器 ➜ 状态变量 ➜ 状态机
- 成功使用了事件机制 + 状态同步

**学了啥**
- command pattern
- 了解名词：多态兼容
- 已经挂载在duck的脚本，可以拖duck进去，会自动寻找。
- (以前视频看懵的东西终于懂了)

### 2025年6月25日
- Iinteract游戏实体逻辑
- Icommand 交互系统内部逻辑
- 成功实装交互系统与状态联动的command pattern
  - 为以后扩展功能做铺垫
- 实现交互UI与按键E功能同步
  - 通过抽出同一函数添加相同预防逻辑 

**学了啥**
- 对缓存口诀：内部持有

### 2025年6月26日
- 修正交互状态内部对交互管理器执行函数的调用，完成事件参数传递
  - 同步duck状态机内部interacable缓存与清理
  - 保证interact来源明晰
- 给InteractionCommandRouter增加一对一预防模式
  - 预防重复注册mode
  - 预防重复添加command

